{#
 # This file is part of MedShakeEHR.
 #
 # Copyright (c) 2017
 # Bertrand Boutillier <b.boutillier@gmail.com>
 # http://www.medshake.net
 #
 # MedShakeEHR is free software: you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation, either version 3 of the License, or
 # any later version.
 #
 # MedShakeEHR is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License
 # along with MedShakeEHR.  If not, see <http://www.gnu.org/licenses/>.
 #/

/##
 # Template > lap : modal de recherche et prescription
 #
 # @author Bertrand Boutillier <b.boutillier@gmail.com>
 #
#}

<div id="modalRecherche" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Nouvelle prescription</h4>
      </div>
      <div class="modal-body">

        {# Onglets #}
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active">
            <a id="recherchermedicTab" href="#recherchermedic" aria-controls="home" role="tab" data-toggle="tab">Rechercher</a>
          </li>
          <li role="presentation" style="display: none;">
            <a id="prescriremedicTab" href="#prescriremedic" aria-controls="profile" role="tab" data-toggle="tab">Prescrire</a>
          </li>
          <li role="presentation" style="display: none;">
            <a id="posologiesmedicTab" href="#posologiesmedic" aria-controls="profile" role="tab" data-toggle="tab">Posologies</a>
          </li>
        </ul>
        <div class="tab-content" style="padding-top :15px; padding-bottom: 15px;">

          {# Onglet Rechercher #}
          <div role="tabpanel" class="tab-pane active" id="recherchermedic">
            <div class="row">
              <form id="rechercheMedic">
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="txtRechercheMedic">Rechercher</label>
                    <input type="text" class="form-control" id="txtRechercheMedic" autocomplete="off" placeholder="nom de médicament ou de substance, code ..."/>
                    <span id="txtRechercheMedicHB" class="help-block">Taper ici le texte de votre recherche</span>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="typeRechercheMedic">Dans</label>
                    <select id="typeRechercheMedic" class="form-control" autocomplete="off">
                      <option value="dci">Médicaments virtuels (DCI)</option>
                      <option value="dcispe">Médicaments virtuels + Spécialités commerciales</option>
                      <option value="spe">Spécialités commerciales</option>
                      <option value="suba">Substances actives</option>
                      <option value="atc">Code ATC</option>
                    </select>
                    <span id="typeRechercheMedicHB" class="help-block">Lieu de recherche du texte indiqué</span>
                  </div>
                </div>
                <div class="col-md-4">
                  <div id="retourRechercheMedicBloc" class="form-group" style="display : none;">
                    <label for="typeRechercheMedic">Montrer</label>
                    <select id="retourRechercheMedic" class="form-control" autocomplete="off">
                      <option value="1">Médicaments virtuels (DCI)</option>
                      <option value="3">Médicaments virtuels + Spécialités commerciales</option>
                      <option value="0">Spécialités commerciales</option>
                    </select>
                    <span id="retourRechercheMedicHB" class="help-block">Médicaments retournés</span>
                  </div>
                </div>
              </form>
            </div>
            <div class="row">
              <div id="rechercheResultats"></div>
            </div>
          </div>

          {# Onglet Prescrire #}
          <div role="tabpanel" class="tab-pane" id="prescriremedic">

            <form>
              <div id="prescriptionAlertMultimedic" class="alert alert-info" role="alert" style="display: none;">Quand plusieurs médicaments sont dans la même ligne de prescription, c'est le 1er qui gouverne durée, voie d'administration et consignes complémentaires.</div>
              <div class="row">
                <div class="col-md-9">
                  <div class="form-group">
                    <textarea class="form-control gras" rows="2" id="lapFrappePrescription" autocomplete="off" style="font-size:30px" placeholder="saisir ici la prescription"></textarea>
                  </div>
                  <div class="form-group">
                    <textarea class="form-control gras" rows="2" id="lapConsignesPrescription" autocomplete="off" style="font-size:15px" placeholder="consignes complémentaires"></textarea>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-group">
                    <select id='uniteUtilisee' class="form-control input-sm"></select>
                  </div>
                  <div class="form-group">
                    <select id="voieUtilisee" class="form-control input-sm"></select>
                  </div>
                  <div class="form-group">
                    <button type="button" class="btn btn-info btn-xs voirPosologies">
                      <span class="glyphicon glyphicon-book" aria-hidden="true"></span>
                      Indications & posologies</button>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="form-group col-md-3 prescriptionChampsDuree">
                  <label class="control-label" for="beginPeriodeID">Première prise
                  </label>
                  <div id="beginPeriodeIDB" class="input-group date datepick">
                    <input type="text" id="beginPeriodeID" name="beginPeriode" class="form-control input-sm" autocomplete="off" value="{{ "now"|date("d/m/Y") }}"/>
                    <span class="input-group-addon">
                      <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                  </div>
                </div>
                <div class="form-group col-md-3 prescriptionChampsDuree">
                  <label class="control-label" for="beginPeriodeID">Renouveller
                  </label>
                  <select id="nbRenouvellements" class="form-control" autocomplete="off">
                    <option selected="selected" value="0">ne pas renouveller</option>
                    <option value="1">renouveller 1 fois</option>
                    <option value="2">renouveller 2 fois</option>
                    <option value="3">renouveller 3 fois</option>
                    <option value="4">renouveller 4 fois</option>
                    <option value="5">renouveller 5 fois</option>
                  </select>
                </div>
                <div class="form-group col-md-3 prescriptionChampsDuree prescriptionChampsEnd">
                  <label class="control-label" for="beginPeriodeID">Dernière prise
                  </label>
                  <div id="endPeriodeIDB" class="input-group date datepick">
                    <input disabled="disabled" readonly="readonly" type="text" id="endPeriodeID" name="endPeriode" class="form-control input-sm" autocomplete="off"/>
                    <span class="input-group-addon">
                      <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                  </div>
                </div>

              </div>
              <div class="row">
                <div class="form-group col-md-6">
                  <label class="control-label" for="prescripteurInitialTT">Prescripteur
                  </label>
                  <input type="text" id="prescripteurInitialTT" class="form-control input-sm" autocomplete="off"/>
                </div>
              </div>

              <div id="prescriptionAlertSecabilite" class="alert alert-danger" role="alert" style="display: none;">Attention, la sécabilité telle que vous la souhaitez ne semble pas assurée !</div>

              <div class="jumbotron" id="prescriptionHuman" style="padding : 1em">
                  <div id="prescriptionHumanMedicName" class="gras"></div>
                  <div id="prescriptionHumanRecap"></div>
                  <div id="prescriptionHumanPoso"></div>
                  <div id="prescriptionHumanConsignes" class="small"></div>
              </div>
              <div class="form-inline" style="margin-bottom : 10px;">
                <div class="checkbox-inline">
                  <label>
                    <input id="prescriptionAldCheckbox" value="" type="checkbox" name="ald">
                    ALD
                  </label>
                </div>
                <div class="checkbox-inline">
                  <label>
                    <input id="prescriptionChroCheckbox" type="checkbox" name="chro" value="">
                    TT chronique
                  </label>
                </div>
                <div class="checkbox-inline">
                  <label>
                    <input id="prescriptionNpsCheckbox" type="checkbox" name="chro" value="">
                    Non substituable
                  </label>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="prescriptionNpsMotif" placeholder="motif pour non substituable" style="display: none;">
                </div>
              </div>
              <div class="form-group">
                <textarea class="form-control" rows="1" id="prescriptionMotif" autocomplete="off" placeholder="motif de prescription (non imprimé)"></textarea>
              </div>
              <button type="button" class="btn btn-primary sendToOrdonnance">Ajouter à l'ordonnance</button>
              <button type="button" class="btn btn-primary sendModifToOrdonnance">Modifier la prescription</button>
              <button type="button" class="btn btn-primary addToLigneOnOrdonnance">Ajouter à la ligne de prescription</button>
              <button type="button" class="btn btn-primary addToTTenCours">Ajouter au traitement en cours</button>
            </form>

          </div>

          {# Posologies #}
          <div role="tabpanel" class="tab-pane" id="posologiesmedic"></div>
        </div>
      </div>
    </div>
  </div>
</div>
{#
 # This file is part of MedShakeEHR.
 #
 # Copyright (c) 2017
 # Bertrand Boutillier <b.boutillier@gmail.com>
 # http://www.medshake.net
 #
 # MedShakeEHR is free software: you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation, either version 3 of the License, or
 # any later version.
 #
 # MedShakeEHR is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License
 # along with MedShakeEHR.  If not, see <http://www.gnu.org/licenses/>.
 #/

/##
 # Template > lap : modal de recherche et prescription
 #
 # @author Bertrand Boutillier <b.boutillier@gmail.com>
 #
#}

<div id="modalRecherche" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Nouvelle prescription</h4>
      </div>
      <div class="modal-body">

        {# Onglets #}
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active">
            <a id="recherchermedicTab" href="#recherchermedic" aria-controls="home" role="tab" data-toggle="tab">Rechercher</a>
          </li>
          <li role="presentation" style="display: none;">
            <a id="prescriremedicTab" href="#prescriremedic" aria-controls="profile" role="tab" data-toggle="tab">Prescrire</a>
          </li>
          <li role="presentation" style="display: none;">
            <a id="posologiesmedicTab" href="#posologiesmedic" aria-controls="profile" role="tab" data-toggle="tab">Posologies</a>
          </li>
        </ul>
        <div class="tab-content" style="padding-top :15px; padding-bottom: 15px;">

          {# Onglet Rechercher #}
          <div role="tabpanel" class="tab-pane active" id="recherchermedic">
            <div class="row">
              <form id="rechercheMedic">
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="txtRechercheMedic">Rechercher</label>
                    <input type="text" class="form-control" id="txtRechercheMedic" autocomplete="off" placeholder="nom de médicament ou de substance, code ..."/>
                    <span id="txtRechercheMedicHB" class="help-block">Taper ici le texte de votre recherche</span>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="typeRechercheMedic">Dans</label>
                    <select id="typeRechercheMedic" class="form-control" autocomplete="off">
                      <option value="dci">Médicaments virtuels (DCI)</option>
                      <option value="dcispe">Médicaments virtuels + Spécialités commerciales</option>
                      <option value="spe">Spécialités commerciales</option>
                      <option value="suba">Substances actives</option>
                      <option value="atc">Code ATC</option>
                    </select>
                    <span id="typeRechercheMedicHB" class="help-block">Lieu de recherche du texte indiqué</span>
                  </div>
                </div>
                <div class="col-md-4">
                  <div id="retourRechercheMedicBloc" class="form-group" style="display : none;">
                    <label for="typeRechercheMedic">Montrer</label>
                    <select id="retourRechercheMedic" class="form-control" autocomplete="off">
                      <option value="1">Médicaments virtuels (DCI)</option>
                      <option value="3">Médicaments virtuels + Spécialités commerciales</option>
                      <option value="0">Spécialités commerciales</option>
                    </select>
                    <span id="retourRechercheMedicHB" class="help-block">Médicaments retournés</span>
                  </div>
                </div>
              </form>
            </div>
            <div class="row">
              <div id="rechercheResultats"></div>
            </div>
          </div>

          {# Onglet Prescrire #}
          <div role="tabpanel" class="tab-pane" id="prescriremedic">

            <form>
              <div id="prescriptionAlertMultimedic" class="alert alert-info" role="alert" style="display: none;">Quand plusieurs médicaments sont dans la même ligne de prescription, c'est le 1er qui gouverne durée, voie d'administration et consignes complémentaires.</div>
              <div class="row">
                <div class="col-md-9">
                  <div class="form-group">
                    <textarea class="form-control gras" rows="2" id="lapFrappePrescription" autocomplete="off" style="font-size:30px" placeholder="saisir ici la prescription"></textarea>
                  </div>
                  <div class="form-group">
                    <textarea class="form-control gras" rows="2" id="lapConsignesPrescription" autocomplete="off" style="font-size:15px" placeholder="consignes complémentaires"></textarea>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-group">
                    <select id='uniteUtilisee' class="form-control input-sm"></select>
                  </div>
                  <div class="form-group">
                    <select id="voieUtilisee" class="form-control input-sm"></select>
                  </div>
                  <div class="form-group">
                    <button type="button" class="btn btn-info btn-xs voirPosologies">
                      <span class="glyphicon glyphicon-book" aria-hidden="true"></span>
                      Indications & posologies</button>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="form-group col-md-3 prescriptionChampsDuree">
                  <label class="control-label" for="beginPeriodeID">Première prise
                  </label>
                  <div id="beginPeriodeIDB" class="input-group date datepick">
                    <input type="text" id="beginPeriodeID" name="beginPeriode" class="form-control input-sm" autocomplete="off" value="{{ "now"|date("d/m/Y") }}"/>
                    <span class="input-group-addon">
                      <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                  </div>
                </div>
                <div class="form-group col-md-3 prescriptionChampsDuree">
                  <label class="control-label" for="beginPeriodeID">Renouveller
                  </label>
                  <select id="nbRenouvellements" class="form-control" autocomplete="off">
                    <option selected="selected" value="0">ne pas renouveller</option>
                    <option value="1">renouveller 1 fois</option>
                    <option value="2">renouveller 2 fois</option>
                    <option value="3">renouveller 3 fois</option>
                    <option value="4">renouveller 4 fois</option>
                    <option value="5">renouveller 5 fois</option>
                  </select>
                </div>
                <div class="form-group col-md-3 prescriptionChampsDuree prescriptionChampsEnd">
                  <label class="control-label" for="beginPeriodeID">Dernière prise
                  </label>
                  <div id="endPeriodeIDB" class="input-group date datepick">
                    <input disabled="disabled" readonly="readonly" type="text" id="endPeriodeID" name="endPeriode" class="form-control input-sm" autocomplete="off"/>
                    <span class="input-group-addon">
                      <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                  </div>
                </div>

              </div>
              <div class="row">
                <div class="form-group col-md-6">
                  <label class="control-label" for="prescripteurInitialTT">Prescripteur
                  </label>
                  <input type="text" id="prescripteurInitialTT" class="form-control input-sm" autocomplete="off"/>
                </div>
              </div>

              <div id="prescriptionAlertSecabilite" class="alert alert-danger" role="alert" style="display: none;">Attention, la sécabilité telle que vous la souhaitez ne semble pas assurée !</div>

              <div class="jumbotron" id="prescriptionHuman" style="padding : 1em">
                  <div id="prescriptionHumanMedicName" class="gras"></div>
                  <div id="prescriptionHumanRecap"></div>
                  <div id="prescriptionHumanPoso"></div>
                  <div id="prescriptionHumanConsignes" class="small"></div>
              </div>
              <div class="form-inline" style="margin-bottom : 10px;">
                <div class="checkbox-inline">
                  <label>
                    <input id="prescriptionAldCheckbox" value="" type="checkbox" name="ald">
                    ALD
                  </label>
                </div>
                <div class="checkbox-inline">
                  <label>
                    <input id="prescriptionChroCheckbox" type="checkbox" name="chro" value="">
                    TT chronique
                  </label>
                </div>
                <div class="checkbox-inline">
                  <label>
                    <input id="prescriptionNpsCheckbox" type="checkbox" name="chro" value="">
                    Non substituable
                  </label>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="prescriptionNpsMotif" placeholder="motif pour non substituable" style="display: none;">
                </div>
              </div>
              <div class="form-group">
                <textarea class="form-control" rows="1" id="prescriptionMotif" autocomplete="off" placeholder="motif de prescription (non imprimé)"></textarea>
              </div>
              <button type="button" class="btn btn-primary sendToOrdonnance">Ajouter à l'ordonnance</button>
              <button type="button" class="btn btn-primary sendModifToOrdonnance">Modifier la prescription</button>
              <button type="button" class="btn btn-primary addToLigneOnOrdonnance">Ajouter à la ligne de prescription</button>
              <button type="button" class="btn btn-primary addToTTenCours">Ajouter au traitement en cours</button>
            </form>

          </div>

          {# Posologies #}
          <div role="tabpanel" class="tab-pane" id="posologiesmedic"></div>
        </div>
      </div>
    </div>
  </div>
</div>
